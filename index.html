<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø´ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚</title>
  <style>
    :root{
      --bg:#0b0f16;
      --card:#101826cc;
      --stroke:#ffffff1f;
      --text:#e8edf5;
      --muted:#a8b4c7;
      --accent:#22c55e;
      --gold:#d4af37;
      --danger:#ef4444;
      --radius:16px;
      --shadow:0 18px 50px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial;color:var(--text);
      background:
      radial-gradient(900px 550px at 85% -10%, #22c55e26, transparent 60%),
      radial-gradient(800px 500px at 10% 10%, #d4af3720, transparent 60%),
      linear-gradient(180deg,#060a11,#0a1520);
    }
    .wrap{max-width:1180px;margin:0 auto;padding:0 16px}
    .nav{position:sticky;top:0;z-index:60;background:#070d16bf;backdrop-filter:blur(10px);border-bottom:1px solid var(--stroke)}
    .nav .wrap{display:flex;align-items:center;justify-content:space-between;min-height:72px;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:36px;height:36px;border:1px solid var(--stroke);border-radius:12px;display:grid;place-items:center;background:#ffffff11}
    .links{display:flex;gap:8px;flex-wrap:wrap}
    .links a{color:var(--text);text-decoration:none;padding:8px 10px;border-radius:12px;border:1px solid transparent;font-size:13px}
    .links a:hover{border-color:var(--stroke);background:#ffffff0d}
    .btn{cursor:pointer;border:1px solid var(--stroke);background:#ffffff0b;color:var(--text);padding:9px 12px;border-radius:12px;font-size:13px;font-weight:700}
    .btn.primary{background:#22c55e22;border-color:#22c55e69}
    .btn.whatsapp{background:#25d36620;border-color:#25d36666}
    .btn.danger{background:#ef444422;border-color:#ef44446b}

    #publicSite section{padding:44px 0}
    .hero{padding:44px 0;border-bottom:1px solid var(--stroke)}
    .hero .layout{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;align-items:center}
    .badge{display:inline-flex;padding:8px 12px;border-radius:999px;background:#d4af3726;border:1px solid #d4af3750;color:#ffe7a0;font-size:13px}
    .title{font-size:42px;margin:12px 0 10px;line-height:1.2}
    .subtitle{line-height:1.9;color:#d4deea;margin:0 0 16px}

    .card{border:1px solid var(--stroke);background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
    .profileCard{padding:16px}
    .profileTop{display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--stroke);padding-bottom:12px;margin-bottom:12px}
    .avatar{width:74px;height:74px;border-radius:999px;border:2px solid var(--gold);box-shadow:0 0 0 5px #d4af3728;overflow:hidden;background:#111827;display:grid;place-items:center}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .pill{padding:10px;border:1px solid var(--stroke);border-radius:12px;background:#ffffff0a;font-size:13px;margin-bottom:8px;display:flex;justify-content:space-between}

    .sectionHead{margin-bottom:14px}
    .sectionHead h3{margin:0 0 6px}
    .sectionHead p{margin:0;color:var(--muted);font-size:13px}

    .grid{display:grid;gap:12px}
    .serviceGrid{grid-template-columns:repeat(3,1fr)}
    .galleryGrid{grid-template-columns:repeat(4,1fr)}
    .service{padding:14px}
    .service h4{margin:0 0 8px}
    .service p{margin:0;color:#d4deea;font-size:13px;line-height:1.8}
    .tag{display:inline-block;margin-top:10px;padding:5px 10px;border-radius:999px;border:1px solid #22c55e68;background:#22c55e1d;font-size:12px}
    .galleryItem{position:relative;aspect-ratio:4/3;overflow:hidden}
    .galleryItem img{width:100%;height:100%;object-fit:cover;display:block}
    .cap{position:absolute;inset:auto 8px 8px 8px;padding:7px 9px;border-radius:10px;background:#00000088;border:1px solid #ffffff30;font-size:12px}

    .chatFab{position:fixed;left:16px;bottom:16px;z-index:70;width:56px;height:56px;border-radius:16px;display:grid;place-items:center}
    .chatPanel{position:fixed;left:16px;bottom:82px;width:min(380px,calc(100vw - 32px));display:none;z-index:80}
    .chatPanel.show{display:block}
    .chatTop{padding:12px;border-bottom:1px solid var(--stroke);display:flex;justify-content:space-between;align-items:center}
    .chatBody{height:300px;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
    .bubble{padding:9px 11px;border:1px solid var(--stroke);border-radius:12px;max-width:85%;font-size:13px;line-height:1.7;white-space:pre-wrap}
    .me{align-self:flex-start;background:#ffffff0a}
    .ai{align-self:flex-end;background:#22c55e15;border-color:#22c55e44}
    .chatInput{display:flex;gap:8px;padding:10px;border-top:1px solid var(--stroke)}
    .input,textarea,select{width:100%;padding:10px;border:1px solid var(--stroke);background:#00000021;color:var(--text);border-radius:12px;font-size:13px}

    #adminSite{display:none}
    #adminSite.show{display:block}
    .adminTop{padding:16px 0;border-bottom:1px solid var(--stroke);background:#070d16bf;position:sticky;top:0;z-index:55}
    .adminHead{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:14px 0}
    .tab{padding:9px 11px;border:1px solid var(--stroke);border-radius:12px;background:#ffffff0a;cursor:pointer;font-size:13px}
    .tab.active{background:#22c55e22;border-color:#22c55e66}
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px}
    .stat{padding:14px}
    .stat b{font-size:30px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .adminCard{padding:14px}
    table{width:100%;border-collapse:separate;border-spacing:0 8px}
    th{text-align:right;color:var(--muted);font-size:12px;padding:0 8px}
    td{padding:9px;background:#ffffff0a;border:1px solid var(--stroke);font-size:13px}
    .rowActions{display:flex;gap:6px;flex-wrap:wrap}
    .hint{color:var(--muted);font-size:12px;line-height:1.8}

    .modal{position:fixed;inset:0;background:#00000080;display:none;align-items:center;justify-content:center;padding:16px;z-index:100}
    .modal.show{display:flex}
    .modalBox{width:min(560px,100%);padding:14px}

    @media (max-width:980px){
      .hero .layout,.split{grid-template-columns:1fr}
      .serviceGrid{grid-template-columns:repeat(2,1fr)}
      .galleryGrid{grid-template-columns:repeat(2,1fr)}
      .stats{grid-template-columns:1fr}
    }
    @media (max-width:560px){
      .links{display:none}
      .title{font-size:33px}
      .serviceGrid,.galleryGrid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div id="publicSite">
    <div class="nav">
      <div class="wrap">
        <div class="brand">
          <div class="logo">ğŸ‘¨â€ğŸ³</div>
          <div>
            <div style="font-weight:800">Ø§Ù„Ø´ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚</div>
            <div style="font-size:12px;color:var(--muted)">Executive Chef</div>
          </div>
        </div>
        <nav class="links">
          <a href="#services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
          <a href="#gallery">Ø§Ù„Ù…Ø¹Ø±Ø¶</a>
          <a href="#contact">Ø§Ù„ØªÙˆØ§ØµÙ„</a>
        </nav>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn whatsapp" id="btnWhatsTop">ÙˆØ§ØªØ³Ø§Ø¨</button>
          <button class="btn" id="openLogin">ğŸ”’ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        </div>
      </div>
    </div>

    <header class="hero">
      <div class="wrap layout">
        <div>
          <div class="badge">ğŸ… Ø®Ø¨Ø±Ø© Ø¯ÙˆÙ„ÙŠØ© ÙÙŠ ØªØ´ØºÙŠÙ„ ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø·Ø§Ø¹Ù…</div>
          <div class="title">ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ Ø¨Ù…ÙˆÙ‚Ø¹Ùƒ + Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</div>
          <p class="subtitle">ØªÙ‚Ø¯Ø± ØªØ¹Ø¯Ù„ ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ØŒ ØµÙˆØ± Ø§Ù„Ù…Ø¹Ø±Ø¶ØŒ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§ØªØŒ ÙˆØªØ´ÙˆÙ ÙƒÙ„ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù…Ù† Ù„ÙˆØ­Ø© Ø®Ø§ØµØ© ÙÙŠÙƒ.</p>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn primary" onclick="document.getElementById('services').scrollIntoView({behavior:'smooth'})">Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</button>
            <button class="btn whatsapp" id="btnWhatsHero">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</button>
          </div>
        </div>

        <div class="card profileCard">
          <div class="profileTop">
            <div class="avatar" id="heroAvatar"><img id="heroAvatarImg" alt="ØµÙˆØ±Ø© Ø§Ù„Ø´ÙŠÙ"></div>
            <div>
              <div style="font-weight:800" id="chefNameView">Ø§Ù„Ø´ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚</div>
              <div style="font-size:12px;color:var(--muted)">Menu Engineering â€¢ Cost Control</div>
              <div style="font-size:12px;color:#f4d27b;margin-top:4px" id="currentProjectView">â€”</div>
            </div>
          </div>
          <div class="pill"><span>âœ… Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ</span><b>Menu</b></div>
          <div class="pill"><span>âœ… Ø¶Ø¨Ø· Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</span><b>Cost</b></div>
          <div class="pill"><span>âœ… ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø·Ø§Ù‚Ù…</span><b>Team</b></div>
          <div class="pill" style="margin:0"><span>âœ… Ø£Ù†Ø¸Ù…Ø© ØªØ´ØºÙŠÙ„</span><b>SOP</b></div>
        </div>
      </div>
    </header>

    <section id="services">
      <div class="wrap">
        <div class="sectionHead"><h3>Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h3><p>Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªÙ‚Ø¯Ø± ØªØ¶ÙŠÙ/ØªØ¹Ø¯Ù„/ØªØ­Ø°Ù Ø£ÙŠ Ø®Ø¯Ù…Ø©.</p></div>
        <div class="grid serviceGrid" id="servicesGrid"></div>
      </div>
    </section>

    <section id="gallery">
      <div class="wrap">
        <div class="sectionHead"><h3>Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</h3><p>ØªÙ‚Ø¯Ø± ØªØªØ­ÙƒÙ… ÙÙŠÙ‡ ÙƒØ§Ù…Ù„ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p></div>
        <div class="grid galleryGrid" id="galleryGrid"></div>
      </div>
    </section>

    <section id="contact">
      <div class="wrap split">
        <div class="card adminCard">
          <h3 style="margin-top:0">ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø±</h3>
          <p>ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨: <a href="#" id="waNumLink" style="color:#9af3b8">â€”</a></p>
          <p>âœ‰ï¸ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„: <a id="emailLink" href="#" style="color:#a4ceff">â€”</a></p>
        </div>
        <form class="card adminCard" id="leadForm">
          <div class="sectionHead"><h3 style="margin:0">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨</h3><p>ÙŠÙ†Ø±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨.</p></div>
          <div class="grid" style="gap:8px">
            <input class="input" id="leadName" placeholder="Ø§Ø³Ù…Ùƒ" required>
            <input class="input" id="leadCity" placeholder="Ù…Ø¯ÙŠÙ†ØªÙƒ" required>
            <textarea id="leadMsg" placeholder="ØªÙØ§ØµÙŠÙ„ Ù…Ø´Ø±ÙˆØ¹Ùƒ" required></textarea>
            <button class="btn primary" type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
          </div>
        </form>
      </div>
    </section>

    <button class="btn primary chatFab" id="chatFab">âœ¨</button>
    <div class="chatPanel card" id="chatPanel">
      <div class="chatTop"><div><b>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´ÙŠÙ</b><div class="hint">ÙŠØ±Ø¯ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø·Ø¨Ø® ÙˆØ§Ù„Ù…Ø·Ø¨Ø® ÙˆØ§Ù„ØªØ´ØºÙŠÙ„</div></div><button class="btn" id="chatClose">Ø¥ØºÙ„Ø§Ù‚</button></div>
      <div class="chatBody" id="chatBody"></div>
      <div class="chatInput"><input class="input" id="chatText" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù† Ù…Ù†ÙŠÙˆØŒ ØªÙ†Ø¸ÙŠÙ… Ù…Ø·Ø¨Ø®ØŒ Ù‡Ø¯Ø±ØŒ ØªØ¯Ø±ÙŠØ¨..."><button class="btn primary" id="chatSend">Ø¥Ø±Ø³Ø§Ù„</button></div>
    </div>
  </div>

  <div id="adminSite">
    <div class="adminTop">
      <div class="wrap adminHead">
        <div><b>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</b><div class="hint">ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ</div></div>
        <div style="display:flex;gap:8px"><button class="btn" id="backPublic">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ÙˆÙ‚Ø¹</button><button class="btn danger" id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button></div>
      </div>
    </div>
    <div class="wrap">
      <div class="stats" id="stats"></div>
      <div class="tabs" id="tabs"></div>
      <div id="tabContent"></div>
    </div>
  </div>

  <div class="modal" id="loginModal">
    <div class="modalBox card">
      <h3 style="margin-top:0">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
      <div class="grid" style="gap:8px">
        <input class="input" id="loginEmail" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
        <input class="input" id="loginPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" type="password">
        <button class="btn primary" id="doLogin">Ø¯Ø®ÙˆÙ„</button>
        <button class="btn" id="closeLogin">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
      <div class="hint" style="margin-top:8px">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: abdehanine123@gmail.com / 123456</div>
    </div>
  </div>

  <script>
    'use strict';
    const KEY={state:'chef_webapp_state_v2',chatLogs:'chef_webapp_chatlogs_v2',chatCount:'chef_webapp_chatcount_v2',session:'chef_webapp_session_v2'};
    const defaults={
      chefName:'Ø§Ù„Ø´ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚',
      profilePhoto:'https://images.unsplash.com/photo-1583394293214-28ded15ee548?auto=format&fit=crop&w=400&q=80',
      whatsapp:'966567067682',
      email:'abdehanine123@gmail.com',
      currentProject:'Ø­Ø§Ù„ÙŠØ§Ù‹ Ø£Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù…Ø·Ø§Ø¹Ù… Ø¨Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØ§Ù„Ù…ØºØ±Ø¨',
      admin:{email:'abdehanine123@gmail.com',password:'123456'},
      services:[
        {id:crypto.randomUUID(),title:'Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ',short:'ØªØ­Ù„ÙŠÙ„ Ø£ØµÙ†Ø§Ù + ØªØ³Ø¹ÙŠØ± + Ø±ÙØ¹ Ø§Ù„Ø±Ø¨Ø­ÙŠØ©',tag:'Menu'},
        {id:crypto.randomUUID(),title:'Ø¶Ø¨Ø· Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ',short:'Cost Control + ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ø± + ØªÙ‚Ø§Ø±ÙŠØ±',tag:'Cost'},
        {id:crypto.randomUUID(),title:'ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø·Ø¨Ø® ÙˆØ§Ù„ØªØ´ØºÙŠÙ„',short:'SOPs + FIFO + ØªÙ‚Ø³ÙŠÙ… Ù…Ø­Ø·Ø§Øª',tag:'Ops'}
      ],
      gallery:[
        {id:crypto.randomUUID(),url:'https://images.unsplash.com/photo-1551218808-94e220e084d2?auto=format&fit=crop&w=1200&q=75',caption:'ØªØ­Ø¶ÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ'},
        {id:crypto.randomUUID(),url:'https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?auto=format&fit=crop&w=1200&q=75',caption:'ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø·Ø¨Ø®'},
        {id:crypto.randomUUID(),url:'https://images.unsplash.com/photo-1541542684-4bf98f9f2b25?auto=format&fit=crop&w=1200&q=75',caption:'Ø®Ø· Ø¥Ù†ØªØ§Ø¬'},
        {id:crypto.randomUUID(),url:'https://images.unsplash.com/photo-1526318896980-cf78c088247c?auto=format&fit=crop&w=1200&q=75',caption:'Ø£Ø·Ø¨Ø§Ù‚ Ø®Ø§ØµØ©'}
      ]
    };
    const tabs=[['profile','Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'],['services','Ø§Ù„Ø®Ø¯Ù…Ø§Øª'],['gallery','Ø§Ù„Ù…Ø¹Ø±Ø¶'],['chat','Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯'],['settings','Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª']];
    let activeTab='profile';

    const $=id=>document.getElementById(id);
    const safeJSON=(v,f)=>{try{return JSON.parse(v)??f}catch{return f}};
    const esc=(s)=>String(s??'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#39;');

    function loadState(){
      const raw=localStorage.getItem(KEY.state);
      if(!raw){localStorage.setItem(KEY.state,JSON.stringify(defaults)); return structuredClone(defaults);}
      const s=safeJSON(raw,defaults);
      return {...structuredClone(defaults),...s,admin:{...defaults.admin,...(s.admin||{})},services:Array.isArray(s.services)?s.services:structuredClone(defaults.services),gallery:Array.isArray(s.gallery)?s.gallery:structuredClone(defaults.gallery)};
    }
    function saveState(s){localStorage.setItem(KEY.state,JSON.stringify(s));}
    function getLogs(){return safeJSON(localStorage.getItem(KEY.chatLogs),[])}
    function setLogs(list){localStorage.setItem(KEY.chatLogs,JSON.stringify(list.slice(-300)));}
    function isLogged(){return localStorage.getItem(KEY.session)==='1'}
    function setSession(v){localStorage.setItem(KEY.session,v?'1':'0')}
    function waUrl(num,msg=''){const n=String(num||'').replace(/\D/g,'');return `https://wa.me/${n}${msg?`?text=${encodeURIComponent(msg)}`:''}`}

    function renderPublic(){
      const st=loadState();
      $('chefNameView').textContent=st.chefName;
      $('currentProjectView').textContent=st.currentProject || 'â€”';
      const img=$('heroAvatarImg'); img.src=st.profilePhoto; img.onerror=()=>{img.src='https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=300&q=60'};

      $('servicesGrid').innerHTML='';
      st.services.forEach(s=>{
        const el=document.createElement('article'); el.className='card service';
        el.innerHTML=`<h4>${esc(s.title)}</h4><p>${esc(s.short)}</p><span class="tag">${esc(s.tag||'Ø®Ø¯Ù…Ø©')}</span>`;
        $('servicesGrid').appendChild(el);
      });

      $('galleryGrid').innerHTML='';
      st.gallery.forEach(g=>{
        const el=document.createElement('article'); el.className='card galleryItem';
        el.innerHTML=`<img src="${esc(g.url)}" alt="${esc(g.caption||'ØµÙˆØ±Ø©')}" loading="lazy"><div class="cap">${esc(g.caption||'')}</div>`;
        $('galleryGrid').appendChild(el);
      });

      $('waNumLink').textContent='+'+st.whatsapp; $('waNumLink').href=waUrl(st.whatsapp,'Ù…Ø±Ø­Ø¨Ø§ Ø´ÙŠÙ'); $('waNumLink').target='_blank';
      $('emailLink').textContent=st.email; $('emailLink').href=`mailto:${st.email}`;
      $('btnWhatsTop').onclick=()=>window.open(waUrl(st.whatsapp,'Ù…Ø±Ø­Ø¨Ø§ Ø´ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚ØŒ Ø¹Ù†Ø¯ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±'), '_blank');
      $('btnWhatsHero').onclick=()=>window.open(waUrl(st.whatsapp,'Ù…Ø±Ø­Ø¨Ø§ Ø´ÙŠÙØŒ Ø£Ø¨ØºÙ‰ Ø¹Ø±Ø¶ Ø®Ø¯Ù…Ø§Øª'), '_blank');

      $('leadForm').onsubmit=(e)=>{
        e.preventDefault();
        const name=$('leadName').value.trim(); const city=$('leadCity').value.trim(); const msg=$('leadMsg').value.trim();
        if(!name||!city||!msg) return;
        window.open(waUrl(st.whatsapp,`Ù…Ø±Ø­Ø¨Ø§ Ø´ÙŠÙØŒ Ø£Ù†Ø§ ${name} Ù…Ù† ${city}. ${msg}`), '_blank');
        e.target.reset();
      };
    }

    function aiReply(q){
      const t=(q||'').toLowerCase();
      if(/Ù…Ù†ÙŠÙˆ|menu|ØªØ³Ø¹ÙŠØ±|Ø±Ø¨Ø­ÙŠØ©/.test(t)) return 'Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ ØªØ¨Ø¯Ø£ Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø£ØµÙ†Ø§Ù Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ± ÙˆÙÙ‚ Food Cost ÙˆØ§Ù„Ø±Ø¨Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©.';
      if(/ØªÙƒÙ„ÙØ©|Ù‡Ø¯Ø±|cost|waste|Ù…Ø®Ø²ÙˆÙ†/.test(t)) return 'Ù„Ø®ÙØ¶ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ: Ø«Ø¨Ù‘Øª Recipe CostingØŒ Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù‡Ø¯Ø± ÙŠÙˆÙ…ÙŠØ§Ù‹ØŒ ÙˆØ·Ø¨Ù‘Ù‚ FIFO Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù…Ø¹ Ø¬Ø±Ø¯ Ø¯ÙˆØ±ÙŠ.';
      if(/ØªÙ†Ø¸ÙŠÙ…|Ù…Ø·Ø¨Ø®|ØªØ´ØºÙŠÙ„|sop|Ù…Ø­Ø·Ø§Øª/.test(t)) return 'ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø·Ø¨Ø® ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø­Ø·Ø§ØªØŒ SOP ÙˆØ§Ø¶Ø­ Ù„ÙƒÙ„ Ù…Ø­Ø·Ø©ØŒ ÙˆÙ‚ÙˆØ§Ø¦Ù… ØªØ­Ù‚Ù‚ Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆÙ†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´ÙØª.';
      if(/ØªØ¯Ø±ÙŠØ¨|Ø·Ø§Ù‚Ù…|ÙØ±ÙŠÙ‚/.test(t)) return 'Ø£ÙØ¶Ù„ ØªØ¯Ø±ÙŠØ¨ Ù„Ù„Ø·Ø§Ù‚Ù… ÙŠÙƒÙˆÙ† Ø¹Ù…Ù„ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®Ø¯Ù…Ø©: Ø³Ø±Ø¹Ø© ØªÙ†ÙÙŠØ° + Ø¬ÙˆØ¯Ø© Ø«Ø§Ø¨ØªØ© + ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ø¶Ø­Ø©.';
      if(/Ø³Ù„Ø§Ù…Ø©|Ù†Ø¸Ø§ÙØ©|Ø¬ÙˆØ¯Ø©/.test(t)) return 'Ø£Ø³Ø§Ø³ Ø§Ù„Ø¬ÙˆØ¯Ø©: Ø¯Ø±Ø¬Ø§Øª Ø­Ø±Ø§Ø±Ø© ØµØ­ÙŠØ­Ø©ØŒ Ù†Ø¸Ø§ÙØ© Ù…Ø³ØªÙ…Ø±Ø©ØŒ ÙØµÙ„ Ø®Ø§Ù…/Ù…Ø·Ø¨ÙˆØ®ØŒ ÙˆØªÙˆØ«ÙŠÙ‚ Ø¯ÙˆØ±ÙŠ ÙŠÙˆÙ…ÙŠ.';
      return 'Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´ÙŠÙ. Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù†: Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ù…Ù†ÙŠÙˆØŒ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø·Ø¨Ø®ØŒ Ø¶Ø¨Ø· Ø§Ù„ØªÙƒØ§Ù„ÙŠÙØŒ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†ØŒ Ø£Ùˆ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø·Ø§Ù‚Ù….';
    }

    function addBubble(text,who){const b=document.createElement('div'); b.className=`bubble ${who}`; b.textContent=text; $('chatBody').appendChild(b); $('chatBody').scrollTop=$('chatBody').scrollHeight;}
    function pushLog(q,a){const logs=getLogs(); logs.push({id:crypto.randomUUID(),q,a,at:new Date().toISOString()}); setLogs(logs); localStorage.setItem(KEY.chatCount,String((Number(localStorage.getItem(KEY.chatCount)||0))+1));}
    function bindChat(){
      $('chatFab').onclick=()=>$('chatPanel').classList.toggle('show');
      $('chatClose').onclick=()=>$('chatPanel').classList.remove('show');
      const send=()=>{const q=$('chatText').value.trim(); if(!q) return; addBubble(q,'me'); const a=aiReply(q); addBubble(a,'ai'); pushLog(q,a); $('chatText').value='';};
      $('chatSend').onclick=send; $('chatText').onkeydown=(e)=>{if(e.key==='Enter') send();};
      addBubble('Ù‡Ù„Ø§ØŒ Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´ÙŠÙ. Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¨Ø£ÙŠ Ø´ÙŠØ¡ ÙŠØ®Øµ Ø§Ù„Ø·Ø¨Ø®ØŒ Ø§Ù„ØªØ´ØºÙŠÙ„ØŒ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø£Ùˆ Ø§Ù„Ø¬ÙˆØ¯Ø©.','ai');
    }

    function renderStats(){
      const logs=getLogs();
      const st=loadState();
      $('stats').innerHTML=`
      <div class="card stat"><div class="hint">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</div><b>${st.services.length}</b></div>
      <div class="card stat"><div class="hint">ØµÙˆØ± Ø§Ù„Ù…Ø¹Ø±Ø¶</div><b>${st.gallery.length}</b></div>
      <div class="card stat"><div class="hint">Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</div><b>${logs.length}</b></div>`;
    }

    function renderTabs(){
      $('tabs').innerHTML='';
      tabs.forEach(([id,label])=>{const t=document.createElement('div'); t.className='tab'+(id===activeTab?' active':''); t.textContent=label; t.onclick=()=>{activeTab=id; renderAdmin();}; $('tabs').appendChild(t);});
    }

    function renderAdmin(){
      renderStats(); renderTabs();
      const st=loadState();
      if(activeTab==='profile'){
        $('tabContent').innerHTML=`<div class="card adminCard split">
          <div class="grid" style="gap:8px">
            <input class="input" id="p_name" value="${esc(st.chefName)}" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´ÙŠÙ">
            <input class="input" id="p_project" value="${esc(st.currentProject)}" placeholder="Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ">
            <input class="input" id="p_photo" value="${esc(st.profilePhoto)}" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
            <button class="btn primary" id="saveProfile">Ø­ÙØ¸</button>
          </div>
          <div class="card adminCard"><img src="${esc(st.profilePhoto)}" style="width:100%;max-height:280px;object-fit:cover;border-radius:12px;border:1px solid var(--stroke)"></div>
        </div>`;
        $('saveProfile').onclick=()=>{st.chefName=$('p_name').value.trim()||st.chefName; st.currentProject=$('p_project').value.trim(); st.profilePhoto=$('p_photo').value.trim()||st.profilePhoto; saveState(st); renderPublic(); renderAdmin();};
      }

      if(activeTab==='services'){
        const rows=st.services.map(s=>`<tr><td>${esc(s.title)}</td><td>${esc(s.short)}</td><td>${esc(s.tag)}</td><td><div class="rowActions"><button class="btn" data-e="${s.id}">ØªØ¹Ø¯ÙŠÙ„</button><button class="btn danger" data-d="${s.id}">Ø­Ø°Ù</button></div></td></tr>`).join('');
        $('tabContent').innerHTML=`<div class="split">
          <div class="card adminCard">
            <h3 style="margin-top:0">Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©</h3>
            <div class="grid" style="gap:8px">
              <input class="input" id="s_title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¯Ù…Ø©">
              <textarea id="s_short" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ±"></textarea>
              <input class="input" id="s_tag" placeholder="Tag Ù…Ø«Ù„: Menu">
              <button class="btn primary" id="addService">Ø¥Ø¶Ø§ÙØ©</button>
            </div>
          </div>
          <div class="card adminCard">
            <table><thead><tr><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„ÙˆØ³Ù…</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody>${rows||'<tr><td colspan="4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª</td></tr>'}</tbody></table>
          </div>
        </div>`;
        $('addService').onclick=()=>{const title=$('s_title').value.trim(); const short=$('s_short').value.trim(); const tag=$('s_tag').value.trim()||'Ø®Ø¯Ù…Ø©'; if(!title||!short) return; st.services.push({id:crypto.randomUUID(),title,short,tag}); saveState(st); renderPublic(); renderAdmin();};
        document.querySelectorAll('[data-d]').forEach(b=>b.onclick=()=>{st.services=st.services.filter(x=>x.id!==b.dataset.d); saveState(st); renderPublic(); renderAdmin();});
        document.querySelectorAll('[data-e]').forEach(b=>b.onclick=()=>{const item=st.services.find(x=>x.id===b.dataset.e); const title=prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',item.title); if(title===null)return; const short=prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØµÙ',item.short); if(short===null)return; const tag=prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ³Ù…',item.tag||'Ø®Ø¯Ù…Ø©'); item.title=title.trim()||item.title; item.short=short.trim()||item.short; item.tag=(tag||'Ø®Ø¯Ù…Ø©').trim(); saveState(st); renderPublic(); renderAdmin();});
      }

      if(activeTab==='gallery'){
        const rows=st.gallery.map(g=>`<tr><td><img src="${esc(g.url)}" style="width:70px;height:50px;object-fit:cover;border-radius:8px"></td><td>${esc(g.caption||'')}</td><td>${esc(g.url)}</td><td><div class="rowActions"><button class="btn" data-eg="${g.id}">ØªØ¹Ø¯ÙŠÙ„</button><button class="btn danger" data-dg="${g.id}">Ø­Ø°Ù</button></div></td></tr>`).join('');
        $('tabContent').innerHTML=`<div class="split">
          <div class="card adminCard">
            <h3 style="margin-top:0">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ù…Ø¹Ø±Ø¶</h3>
            <div class="grid" style="gap:8px">
              <input class="input" id="g_url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
              <input class="input" id="g_cap" placeholder="ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©">
              <button class="btn primary" id="addGallery">Ø¥Ø¶Ø§ÙØ©</button>
            </div>
          </div>
          <div class="card adminCard">
            <table><thead><tr><th>ØµÙˆØ±Ø©</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ø±Ø§Ø¨Ø·</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead><tbody>${rows||'<tr><td colspan="4">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±</td></tr>'}</tbody></table>
          </div>
        </div>`;
        $('addGallery').onclick=()=>{const url=$('g_url').value.trim(); const caption=$('g_cap').value.trim(); if(!url) return; st.gallery.push({id:crypto.randomUUID(),url,caption}); saveState(st); renderPublic(); renderAdmin();};
        document.querySelectorAll('[data-dg]').forEach(b=>b.onclick=()=>{st.gallery=st.gallery.filter(x=>x.id!==b.dataset.dg); saveState(st); renderPublic(); renderAdmin();});
        document.querySelectorAll('[data-eg]').forEach(b=>b.onclick=()=>{const item=st.gallery.find(x=>x.id===b.dataset.eg); const url=prompt('ØªØ¹Ø¯ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©',item.url); if(url===null)return; const cap=prompt('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØµÙ',item.caption||''); item.url=url.trim()||item.url; item.caption=(cap||'').trim(); saveState(st); renderPublic(); renderAdmin();});
      }

      if(activeTab==='chat'){
        const logs=getLogs().slice().reverse();
        const rows=logs.map(l=>`<tr><td>${new Date(l.at).toLocaleString('ar-SA')}</td><td>${esc(l.q)}</td><td>${esc(l.a)}</td></tr>`).join('');
        $('tabContent').innerHTML=`<div class="card adminCard"><div style="display:flex;justify-content:space-between;gap:8px;align-items:center"><h3 style="margin:0">Ø³Ø¬Ù„ Ø±Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</h3><button class="btn danger" id="clearLogs">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button></div><table><thead><tr><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ø³Ø¤Ø§Ù„ Ø§Ù„Ø²Ø§Ø¦Ø±</th><th>Ø±Ø¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</th></tr></thead><tbody>${rows||'<tr><td colspan="3">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„</td></tr>'}</tbody></table></div>`;
        $('clearLogs').onclick=()=>{if(confirm('Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ØŸ')){setLogs([]); localStorage.setItem(KEY.chatCount,'0'); renderAdmin();}};
      }

      if(activeTab==='settings'){
        $('tabContent').innerHTML=`<div class="split">
          <div class="card adminCard">
            <h3 style="margin-top:0">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
            <div class="grid" style="gap:8px">
              <input class="input" id="set_email" value="${esc(st.email)}" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
              <input class="input" id="set_wa" value="${esc(st.whatsapp)}" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
              <button class="btn primary" id="saveContact">Ø­ÙØ¸</button>
            </div>
          </div>
          <div class="card adminCard">
            <h3 style="margin-top:0">ØªØºÙŠÙŠØ± Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            <div class="grid" style="gap:8px">
              <input class="input" id="set_admin_email" value="${esc(st.admin.email)}" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">
              <input class="input" id="set_admin_pass" value="${esc(st.admin.password)}" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" type="password">
              <button class="btn primary" id="saveAdmin">Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
              <div class="hint">Ø¨Ø¹Ø¯ Ø§Ù„Ø­ÙØ¸ØŒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© ÙŠÙƒÙˆÙ† Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯.</div>
            </div>
          </div>
        </div>`;
        $('saveContact').onclick=()=>{st.email=$('set_email').value.trim()||st.email; st.whatsapp=$('set_wa').value.trim()||st.whatsapp; saveState(st); renderPublic(); alert('ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„');};
        $('saveAdmin').onclick=()=>{const e=$('set_admin_email').value.trim(); const p=$('set_admin_pass').value.trim(); if(!e||!p){alert('Ù„Ø§Ø²Ù… Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯');return;} st.admin.email=e; st.admin.password=p; saveState(st); alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„');};
      }
    }

    function openAdmin(){ $('publicSite').style.display='none'; $('adminSite').classList.add('show'); renderAdmin(); }
    function backPublic(){ $('publicSite').style.display='block'; $('adminSite').classList.remove('show'); }

    function bindLogin(){
      $('openLogin').onclick=()=>$('loginModal').classList.add('show');
      $('closeLogin').onclick=()=>$('loginModal').classList.remove('show');
      $('doLogin').onclick=()=>{
        const st=loadState();
        const e=$('loginEmail').value.trim(); const p=$('loginPass').value.trim();
        if(e===st.admin.email && p===st.admin.password){setSession(true); $('loginModal').classList.remove('show'); openAdmin();}
        else alert('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
      };
      $('backPublic').onclick=backPublic;
      $('logoutBtn').onclick=()=>{setSession(false); backPublic();};
    }

    renderPublic();
    bindChat();
    bindLogin();
    if(isLogged()) openAdmin();
  </script>
</body>
</html>
